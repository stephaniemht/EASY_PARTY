<%= form_with model: @event, local: true do |form| %>
  <%# Section pour les informations générales de l'événement %>
  <div class="form-group">
    <%= form.label :name, "Nom de l'événement" %>
    <%= form.text_field :name, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :description, "Description" %>
    <%= form.text_area :description, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :address, "Adresse" %>
    <%= form.text_field :address, class: "form-control" %>
  </div>

  
  <h2>Ajouter des dates </h2>
  <div data-controller="dates" >
    <div class="form-group">
      <%= form.label :date_fixed, "Choix des dates :" %>
    </div>
      
    <div class="form-group">
      <%= form.label :date_fixed, "Date unique" %>
      <%= form.check_box :date_fixed, data: { dates_target: "checkboxFixed", action: "change->dates#toggleDateFields" } %>
      
      <%= form.label :proposed_date, "Sondage" %>
      <%= form.check_box :proposed_date, data: { dates_target: "checkboxProposed", action: "change->dates#toggleDateFields" } %>
    </div>

    <!-- date fixe --> 
    <div class="form-group" data-dates-target="fixedDateField" style="display: none;">
      <%= form.label :date_fixed, "Date fixe" %>
      <%= form.date_field :date_fixed, class: "form-control" %>
    </div>

    <!-- date sondage --> 
    <div class="form-group" data-dates-target="proposedDateField" style="display: none;">
      <div data-dates-target="datesList">
        <div class="proposed-date-field">
          <%= form.date_field :proposed_date[], class: "form-control", placeholder: "Proposez une date" %>
          <button class="btn btn-danger" data-action="click->dates#removeDateField">Supprimer</button>
        </div>
      </div>
      <button class="btn btn-primary" data-action="click->dates#addDateField">Ajouter une date</button>
    </div>

  </div> 

  <div data-controller="participation">
    <div class="form-group">
      <%= form.label :ask_for_participation, "Voulez-vous créer une cagnotte ?" %>
      <%= form.check_box :ask_for_participation, data: { participation_target: "checkbox", action: "change->participation#toggleAmountField" } %>
    </div>


    <div class="form-group" data-participation-target="amountField" style="display: none;">
      <%= form.label :amount_per_person, "Montant demandé par personne (€)" %>
      <%= form.number_field :amount_per_person, class: "form-control", min: 1, step: 0.01 %>
    </div>

    <div class="form-group" data-participation-target="listField">
      <%= form.label :item, "Qu'apportez-vous à la soirée ?" %>
      <input type="text" name="item[content]" value="">
    </div>
  </div>


  <%= form.submit "Créer l'événement", class: "btn btn-primary" %>
<% end %>
